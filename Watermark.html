<!doctype html>
<html lang="ar">
<head>
  <meta charset="utf-8">
  <title>Ø£Ø¯Ø§Ø© Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ø®ØµÙŠØ©</title>
  <style>
    body{font-family:sans-serif;max-width:720px;margin:40px auto;padding:20px}
    h2{color:#444;text-align:center}
    form{background:#f8f8f8;padding:20px;border-radius:12px}
    label{display:block;margin:10px 0}
    button{padding:10px 16px;background:#0070f3;color:#fff;border:none;border-radius:8px;cursor:pointer}
    button:hover{background:#0055cc}
    #result{margin-top:20px;text-align:center}
  </style>
</head>
<body>
  <h2>Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø´Ø®ØµÙŠ</h2>
  <form id="uploadForm">
    <label>Ø§Ø®ØªØ± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ: <input type="file" name="video" accept="video/*" required></label>

    <label>Ø§Ù„Ø·Ø±ÙŠÙ‚Ø©:
      <select name="method">
        <option value="crop">Ù‚Øµ (Crop)</option>
        <option value="overlay">ØªØºØ·ÙŠØ© (Overlay)</option>
        <option value="blur">Ø·Ù…Ø³ (Blur)</option>
      </select>
    </label>

    <label>Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ): <input type="text" name="params" placeholder="Ù…Ø«Ø§Ù„: cropRight=100 Ø£Ùˆ x=10,y=10,w=200,h=80"></label>

    <label><input type="checkbox" name="confirm" required> Ø£Ø¤ÙƒØ¯ Ø£Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù„ÙŠ Ø£Ùˆ Ù„Ø¯ÙŠ Ø§Ù„Ø¥Ø°Ù† Ù„ØªØ¹Ø¯ÙŠÙ„Ù‡</label>

    <button type="submit">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</button>
  </form>

  <div id="result"></div>

  <script>
    const backendURL = "watermark-production-7331.up.railway.app"; // ğŸ”— ØºÙŠÙ‘Ø± Ø¨Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ù…Ù† Railway
    const form = document.getElementById("uploadForm");
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const data = new FormData(form);
      document.getElementById("result").innerHTML = "â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...";
      try {
        const res = await fetch(`${backendURL}/process`, { method: "POST", body: data });
        if (!res.ok) throw new Error("ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±");
        const blob = await res.blob();
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "processed.mp4";
        a.textContent = "â¬‡ï¸ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù†Ø§ØªØ¬";
        document.getElementById("result").innerHTML = "";
        document.getElementById("result").appendChild(a);
      } catch (err) {
        document.getElementById("result").innerHTML = "âŒ Ø­Ø¯Ø« Ø®Ø·Ø£: " + err.message;
      }
    });
  </script>
</body>
</html>