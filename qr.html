<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>SkyData - صانع QR Code الاحترافي</title>

<meta name="description" content="أداة Skydata مجانية 100% لإنشاء رمز QR Code احترافي وعالي الجودة (PNG) لرابط، نص، إيميل، أو هاتف. يدعم التخصيص والألوان، ومثالي للطباعة والأعمال التجارية.">

<meta name="keywords" content="صانع QR Code مجاني, إنشاء رمز QR, مولد QR Code, QR Code maker, free QR code generator, QR لرابط, QR للنص, QR Code احترافي, SkyData">

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<link rel="stylesheet" href="style.css">

<script type="text/javascript" src="https://unpkg.com/qr-code-styling@1.6.0/lib/qr-code-styling.js"></script>
    
<script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
<script>
  window.OneSignalDeferred = window.OneSignalDeferred || [];
  OneSignalDeferred.push(async function(OneSignal) {
    await OneSignal.init({
      appId: "9bc8ff80-a325-4935-ba4d-03e362a3cc5f",
    });
  });
</script>

    <style>
        /* ==============================================
           1. إصلاحات الهيدر والقائمة والعناصر (Standard)
           ============================================== */
        
        body {
            background-color: #0b132b;
            padding-top: 90px !important;
            overflow-x: hidden;
            font-family: 'Cairo', sans-serif;
            display: block; 
        }

        /* إزالة تأثيرات التركيز والضغط */
        *, *::before, *::after {
            -webkit-tap-highlight-color: transparent !important;
            outline: none !important;
            box-shadow: none !important;
        }
        *:focus, *:active {
            outline: none !important;
            border-color: transparent !important;
        }

        /* الهيدر المثبت */
        .main-header {
            height: 70px !important; 
            background-color: #0b132b !important;
            border-bottom: 1px solid #1f2d4d;
            padding: 0 !important;
            position: fixed; top: 0; width: 100%; z-index: 2000;
            display: flex !important; align-items: center !important;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .main-header .container {
            width: 100% !important; height: 100% !important; max-width: 100% !important;
            padding: 0 20px !important;
            display: flex !important; justify-content: space-between !important;
            align-items: center !important; margin: 0 !important;
        }

        .logo-img { height: 35px !important; width: auto; }

        /* القائمة الجانبية */
        .sidebar { z-index: 2001 !important; padding-top: 20px !important; background-color: #111a30; box-shadow: -5px 0 20px rgba(0,0,0,0.5); }
        
        /* طبقة التعتيم */
        .sidebar-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); z-index: 1500;
            opacity: 0; visibility: hidden; transition: 0.3s; backdrop-filter: blur(3px);
        }
        .sidebar-overlay.active { opacity: 1; visibility: visible; }
        
        /* ======== 2. تنسيقات أداة QR Code ======== */

        main { text-align: center; max-width: 1200px; margin: 0 auto; padding: 20px 20px 50px 20px; }
        .tool-box {
            background-color: #111a30; padding: 30px;
            border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 1px solid #2a3a5a; text-align: center;
        }
        .tool-box h1 { color: #00aaff; margin-bottom: 20px; }
        
        .qr-layout { display: flex; flex-wrap: wrap; gap: 30px; }
        .qr-settings { flex: 1; min-width: 300px; text-align: right; }
        .qr-preview { flex: 1; min-width: 300px; display: flex; flex-direction: column; align-items: center; justify-content: center; }

        /* (جديد) تصميم التبويبات (Tabs) */
        .tabs { display: flex; margin-bottom: 20px; background-color: #0e1624; border-radius: 8px; overflow: hidden; }
        .tab-btn {
            flex: 1; padding: 12px; border: none; background-color: transparent;
            color: #e0e0e0; font-size: 1.1em; font-weight: bold; cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .tab-btn:hover { background-color: #1f2d4d; }
        .tab-btn.active { background-color: #00aaff; color: #111a30; } /* لون الموقع الأساسي */

        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .setting-group { margin-bottom: 20px; }
        .setting-group label { display: block; font-size: 1.1em; color: #fff; margin-bottom: 10px; }
        .setting-group input[type="text"], .setting-group select {
            width: 100%; background-color: #0b132b; color: #e0e0e0; border: 1px solid #2a3a5a;
            padding: 12px; border-radius: 5px; font-size: 1em; box-sizing: border-box;
        }
        
        /* تصميم زر رفع الملف المخصص */
        #image-qr-input { display: none; }
        .custom-file-upload {
            display: block; background-color: #00aaff; color: #111a30;
            padding: 12px 25px; font-size: 1.1em; font-weight: bold;
            border-radius: 5px; cursor: pointer; transition: all 0.3s ease;
            text-align: center;
        }
        .custom-file-upload:hover { background-color: #fff; transform: scale(1.03); }
        #upload-status { font-size: 0.9em; color: #aaa; margin-top: 10px; }

        /* تصميم أزرار الألوان المخصصة */
        .color-group { display: flex; justify-content: space-between; gap: 10px; }
        .color-input-wrapper { display: flex; flex-direction: column; align-items: center; flex: 1; position: relative; }
        .color-input-wrapper label { font-size: 0.9em; color: #aaa; margin-bottom: 5px; }
        .color-input-wrapper input[type="color"] { position: absolute; top: 0; left: 0; width: 100%; height: 40px; opacity: 0; cursor: pointer; z-index: 10; }
        .color-swatch { width: 100%; height: 40px; border: 2px solid #2a3a5a; border-radius: 5px; cursor: pointer; transition: border-color 0.3s ease; }
        .color-input-wrapper:hover .color-swatch { border-color: #00aaff; }

        /* منطقة عرض الكود */
        #canvas {
            width: 300px; height: 300px; border: 2px dashed #2a3a5a; border-radius: 8px;
            display: flex; align-items: center; justify-content: center; padding: 10px;
            background-color: #0b132b; transition: all 0.3s ease;
        }
        
        #download-area { margin-top: 20px; }
        
        .cta-button {
            display: inline-block; background-color: #00aaff; color: #ffffff;
            padding: 12px 25px; font-size: 1.1em; font-weight: bold;
            text-decoration: none; border-radius: 5px; border: none;
            cursor: pointer; transition: all 0.3s ease; margin: 5px;
        }
        .cta-button:hover { transform: scale(1.03); }
        .cta-button.green { background-color: #27ae60; }
        .cta-button.red { background-color: #dc3545; }
        .cta-button:disabled { background-color: #555; cursor: not-allowed; }

        /* Responsive */
        @media (max-width: 800px) { .qr-layout { flex-direction: column; } .qr-preview { order: -1; } }
        @media (max-width: 600px) { 
            .container { padding: 10px; } 
            .tool-box { padding: 20px; }
            .tool-box h1 { font-size: 1.8em; }
            .color-group { flex-direction: column; }
        }
    </style>
    </head>
<body>

    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <header class="main-header">
        <div class="container">
            <a href="index.html" class="logo">
                <img src="https://i.ibb.co/v4vwvcGq/skydatafull.webp" alt="SkyData" class="logo-img">
            </a>
            <label class="hamburger menu-toggle">
              <input type="checkbox" id="menu-checkbox">
              <svg viewBox="0 0 32 32">
                <path class="line line-top-bottom" d="M27 10 13 10C10.8 10 9 8.2 9 6 9 3.5 10.8 2 13 2 15.2 2 17 3.8 17 6L17 26C17 28.2 18.8 30 21 30 23.2 30 25 28.2 25 26 25 23.8 23.2 22 21 22L7 22"></path>
                <path class="line" d="M7 16 27 16"></path>
              </svg>
            </label>
        </div>
    </header>

    <nav class="sidebar">
        <div class="sidebar-section">
            <h4>القسم 1: تعريف واختصار</h4>
            <ul>
                <li><a href="index.html"><i class="fas fa-home"></i> <span>المنزل</span></a></li>
                <li><a href="aboutus.html"><i class="fas fa-users"></i> <span>عنا</span></a></li>
                <li><a href="safety.html"><i class="fas fa-shield-alt"></i> <span>شروط الخدمة</span></a></li>
                <li><a href="support.html"><i class="fas fa-headset"></i> <span>خدمة العملاء</span></a></li>
                <li><a href="login.html" id="auth-link">
                    <i class="fas fa-sign-in-alt"></i> <span>تسجيل الدخول</span>
                </a></li>
            </ul>
        </div>

        <div class="sidebar-section">
            <h4 class="ai-title"><i class="fas fa-brain"></i> القسم 2: أدوات AI</h4>
            <ul>
                <li><a href="remove-background-pro.html"><i class="fas fa-eraser"></i> <span>إزالة الخلفية</span></a></li>
                <li><a href="imgscan.html"><i class="fas fa-text-height"></i> <span>تحليل الصور إلى نص</span></a></li>
                <li><a href="logo.html"><i class="fas fa-palette"></i> <span>صنع شعار</span></a></li>
                <li><a href="names.html"><i class="fas fa-random"></i> <span>مولِّد أسماء عشوائية</span></a></li>
                <li><a href="password.html"><i class="fas fa-lock"></i> <span>مولّد كلمات مرور</span></a></li>
                <li><a href="password-strength.html"><i class="fas fa-key"></i> <span>إختبار قوة كلمة السر</span></a></li>
            </ul>
        </div>

        <div class="sidebar-section">
            <h4>القسم 3: أدوات مجانية</h4>
            <ul>
                <li><a href="editor.html"><i class="fas fa-edit"></i> <span>تحرير الصور</span></a></li>
                <li><a href="imgdv.html"><i class="fas fa-compress-arrows-alt"></i> <span>ضغط الصور</span></a></li>
                <li><a href="imgtag.html"><i class="fas fa-link"></i> <span>تحويل صور إلى روابط</span></a></li>
                <li><a href="pdf.html"><i class="fas fa-file-pdf"></i> <span>تحويل صور إلى PDF</span></a></li>
                <li><a href="qr.html" style="background: rgba(0, 170, 255, 0.1); color: #fff;"><i class="fas fa-qrcode"></i> <span>صانع كود QR</span></a></li>
                <li><a href="size.html"><i class="fas fa-expand-arrows-alt"></i> <span>تغيير أبعاد الصورة</span></a></li>
                <li><a href="zoom.html"><i class="fas fa-search-plus"></i> <span>تكبير دقة الصورة</span></a></li>
                <li><a href="note.html"><i class="fas fa-sticky-note"></i> <span>مذكرة فورية</span></a></li>
                <li><a href="age.html"><i class="fas fa-calendar-alt"></i> <span>حساب الفرق بين تاريخين</span></a></li>
                
                <li><a href="prayer.html"><i class="fas fa-mosque"></i> <span>أوقات الصلاة</span></a></li>
                <li><a href="data.city.html"><i class="fas fa-cloud-sun-rain"></i> <span>الطقس</span></a></li>

                <li><a href="txtpdf.html"><i class="fas fa-file-word"></i> <span>تحويل النص إلى PDF</span></a></li>
                <li><a href="Mp3.html"><i class="fas fa-file-audio"></i> <span>تحويل فيديو إلى MP3</span></a></li>
                <li><a href="coler.html"><i class="fas fa-swatchbook"></i> <span>أداة ألوان (Picker)</span></a></li>
                <li><a href="units.html"><i class="fas fa-exchange-alt"></i> <span>محوّلات وحدات</span></a></li>
                <li><a href="cameqr.html"><i class="fas fa-camera"></i> <span>قارئ QR من الكاميرا</span></a></li>
                <li><a href="recorder.html"><i class="fas fa-microphone"></i> <span>تسجيل صوت</span></a></li>
                <li><a href="v-o-edit.html"><i class="fas fa-cut"></i> <span>قص مقطع صوت/فيديو</span></a></li>
                <li><a href="money.html"><i class="fas fa-money-bill-wave"></i> <span>تحويل العملات</span></a></li>
                <li><a href="calculator.html"><i class="fas fa-calculator"></i> <span>الة حاسبة</span></a></li>
                <li><a href="arbtxt.html"><i class="fas fa-font"></i> <span>زخرفة نصوص عربية</span></a></li>
                <li><a href="engtxt.html"><i class="fas fa-spell-check"></i> <span>زخرفة نصوص إنجليزية</span></a></li>
                <li><a href="emoji.html"><i class="fas fa-smile"></i> <span>رموز و إيموجي</span></a></li>
                <li><a href="more.html"><i class="fas fa-sort-amount-up"></i> <span>استخراج الكلمات المكررة</span></a></li>
                <li><a href="fix.html"><i class="fas fa-check-double"></i> <span>تصحيح إملائي</span></a></li>
                <li><a href="pixels.html"><i class="fas fa-draw-polygon"></i> <span>رسم & Pixel</span></a></li>
                <li><a href="hide.html"><i class="fas fa-eye-slash"></i> <span>حروف مخفية</span></a></li>
                <li><a href="kill.html"><i class="fas fa-th-large"></i> <span>تقسيم نص</span></a></li>
                <li><a href="delete.html"><i class="fas fa-trash-alt"></i> <span>حذف الأسطر المكررة</span></a></li>
                <li><a href="gif.html"><i class="fas fa-film"></i> <span>تحويل فيديو إلى GIF</span></a></li>
                <li><a href="morse.html"><i class="fas fa-ellipsis-h"></i> <span>شيفرة مورس</span></a></li>
                <li><a href="hash.html"><i class="fas fa-hashtag"></i> <span>مولد Hash</span></a></li>
                <li><a href="crypto.html"><i class="fas fa-shield-virus"></i> <span>تشفير AES</span></a></li>
                <li><a href="url.html"><i class="fas fa-shield-alt"></i> <span>كشف روابط ضارة</span></a></li>
                <li><a href="voyse.html"><i class="fas fa-volume-up"></i> <span>قياس الضوضاء (dB)</span></a></li>
                <li><a href="base64.html"><i class="fas fa-retweet"></i> <span>تشفير Base64</span></a></li>
                <li><a href="yaml.html"><i class="fas fa-file-code"></i> <span>JSON ↔ YAML</span></a></li>
                <li><a href="codegood.html"><i class="fas fa-code"></i> <span>تنسيق الأكواد</span></a></li>
                <li><a href="dns.html"><i class="fas fa-network-wired"></i> <span>فحص DNS</span></a></li>
                <li><a href="csv.html"><i class="fas fa-file-csv"></i> <span>CSV ↔ JSON</span></a></li>
                <li><a href="zip.html"><i class="fas fa-file-archive"></i> <span>تجميع ملفات ZIP</span></a></li>
                <li><a href="imgcut.html"><i class="fas fa-crop-alt"></i> <span>قص الصور بأشكال</span></a></li>
                <li><a href="safetymake.html"><i class="fas fa-file-signature"></i> <span>مولد سياسة الخصوصية</span></a></li>
                <li><a href="goodarbtxt.html"><i class="fas fa-text-width"></i> <span>ضغط خطوط الويب</span></a></li>
            </ul>
        </div>
        
        <div class="sidebar-footer">
            <div class="social-links">
                <a href="https://discord.gg/6m3c2up4p3" target="_blank"><i class="fab fa-discord"></i></a>
                <a href="https://youtube.com/@skydataa" target="_blank"><i class="fab fa-youtube"></i></a>
                <a href="update.html"><i class="fab fa-android"></i> <span>تحميل التطبيق</span></a>
            </div>
            <div class="footer-nav">
                <a href="safety.html"><i class="fas fa-shield-alt"></i> <span>الخصوصية</span></a>
                <a href="aboutus.html"><i class="fas fa-users"></i> <span>عنا</span></a>
                <a href="help.html"><i class="fas fa-hands-helping"></i> <span>ادعمنا</span></a>
            </div>
            <p class="copyright">
                SkyData © 2025
            </p>
        </div>
    </nav>

    <main class="container">
        
        <div class="tool-box">
            <h1><i class="fas fa-qrcode"></i> صانع QR Code الاحترافي</h1>
            
            <div class="qr-layout">
                
                <div class="qr-preview">
                    <div id="canvas">
                        <span data-lang-key="previewArea">اختر نوع الإدخال وابدأ...</span>
                    </div>
                    <div id="download-area" style="display: none;">
                        <button id="download-btn" class="cta-button green" data-lang-key="downloadButton">تحميل (PNG)</button>
                    </div>
                </div>
                
                <div class="qr-settings">
                    
                    <div class="tabs">
                        <button class="tab-btn active" data-tab="text-tab" data-lang-key="tabText">نص / رابط</button>
                        <button class="tab-btn" data-tab="image-tab" data-lang-key="tabImage">رفع صورة</button>
                    </div>

                    <div id="text-tab" class="tab-content active">
                        <div class="setting-group">
                            <label for="data-input" data-lang-key="dataLabel">النص أو الرابط:</label>
                            <input type="text" id="data-input" placeholder="https://www.example.com">
                        </div>
                    </div>

                    <div id="image-tab" class="tab-content">
                        <div class="setting-group">
                            <label for="image-qr-input" data-lang-key="imageLabel">رفع صورة (لإنشاء رابط لها):</label>
                            <label for="image-qr-input" class="custom-file-upload" data-lang-key="uploadButton">اختر صورة...</label>
                            <input type="file" id="image-qr-input" accept="image/*">
                            <div id="upload-status"></div>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <label data-lang-key="colorsLabel">الألوان:</label>
                        <div class="color-group">
                            <div class="color-input-wrapper">
                                <label data-lang-key="dotsColor">النقاط</label>
                                <input type="color" id="dots-color-input" value="#121212">
                                <div class="color-swatch" id="dots-swatch" style="background-color: #121212;"></div>
                            </div>
                            <div class="color-input-wrapper">
                                <label data-lang-key="cornersColor">الزوايا</label>
                                <input type="color" id="corners-color-input" value="#00aaff">
                                <div class="color-swatch" id="corners-swatch" style="background-color: #00aaff;"></div>
                            </div>
                            <div class="color-input-wrapper">
                                <label data-lang-key="bgColor">الخلفية</label>
                                <input type="color" id="bg-color-input" value="#ffffff">
                                <div class="color-swatch" id="bg-swatch" style="background-color: #ffffff;"></div>
                            </div>
                        </div>
                    </div>

                    <div class="setting-group">
                        <label for="dots-style-select" data-lang-key="dotsStyleLabel">شكل النقاط:</label>
                        <select id="dots-style-select">
                            <option value="square" data-lang-key="styleSquare">مربع (افتراضي)</option>
                            <option value="dots" data-lang-key="styleDots">نقاط</option>
                            <option value="rounded" data-lang-key="styleRounded">مستدير</option>
                            <option value="classy" data-lang-key="styleClassy">أنيق</option>
                            <option value="classy-rounded" data-lang-key="styleClassyRounded">أنيق مستدير</option>
                            <option value="extra-rounded" data-lang-key="styleExtraRounded">مستدير جداً</option>
                        </select>
                    </div>
                    <div class="setting-group">
                        <label for="corners-style-select" data-lang-key="cornersStyleLabel">شكل الزوايا:</label>
                        <select id="corners-style-select">
                            <option value="square" data-lang-key="styleSquare">مربع</option>
                            <option value="dot" data-lang-key="styleDot">نقطة</option>
                            <option value="extra-rounded" data-lang-key="styleExtraRounded">مستدير جداً</option>
                        </select>
                    </div>

                    </div>
            </div>

        </div>

        <div class="instruction-box">
            <h2 data-lang-key="instructionTitle">دليل استخدام صانع QR Code</h2>
            <p data-lang-key="whatIsQR">
                هذه أداة احترافية تتيح لك إنشاء أكواد QR مخصصة. يمكنك تحويل نص أو رابط، أو حتى رفع صورة ليتم إنشاء رابط لها ووضعه في الكود. يمكنك تغيير الألوان وشكل نقاط الكود لجعله فريداً.
            </p>
            <h3 data-lang-key="howToUse">كيفية الاستخدام</h3>
            <ul>
                <li data-lang-key="step1">1. اختر نوع الإدخال: "نص/رابط" أو "رفع صورة".</li>
                <li data-lang-key="step2">2. إذا اخترت "نص"، اكتبه. إذا اخترت "صورة"، ارفعها وانتظر إنشاء الرابط.</li>
                <li data-lang-key="step3">3. (اختياري) اختر الألوان، وشكل النقاط، وشكل الزوايا من القوائم.</li>
                <li data-lang-key="step4">4. سيظهر الكود مباشرة. اضغط "تحميل" لحفظه كصورة PNG.</li>
            </ul>
            <p class="privacy-note" data-lang-key="privacyNote">
                + حماية خصوصيتك 100%: كل الأكواد (للنصوص) يتم إنشاؤها على جهازك. إذا قمت برفع صورة، يتم رفعها إلى ImgBB للحصول على رابط فقط.
            </p>
        </div>

    </main>

    <script>
        // --- 1. القائمة الجانبية ---
        const menuCheckbox = document.getElementById('menu-checkbox');
        const sidebar = document.querySelector('.sidebar');
        const overlay = document.getElementById('sidebar-overlay');

        function toggleMenu(open) {
            if(open) { sidebar.classList.add('open'); overlay.classList.add('active'); menuCheckbox.checked = true; }
            else { sidebar.classList.remove('open'); overlay.classList.remove('active'); menuCheckbox.checked = false; }
        }
        menuCheckbox.addEventListener('change', (e) => toggleMenu(e.target.checked));
        overlay.addEventListener('click', () => toggleMenu(false));
        
        // --- 2. منطق الأداة ---
        const IMGBB_API_KEY = "f0ff703738276bb67fcc6b7f0a6778d5";

        // --- قاموس الترجمة (مدمج في JS لسهولة التحديث) ---
        const translations = {
            "ar": {
                "pageTitle": "صانع QR Code الاحترافي - Skydata", "toolTitle": "صانع QR Code الاحترافي", "previewArea": "اختر نوع الإدخال وابدأ...", "downloadButton": "تحميل (PNG)", "tabText": "نص / رابط", "tabImage": "رفع صورة", "dataLabel": "النص أو الرابط:", "imageLabel": "رفع صورة (لإنشاء رابط لها):", "uploadButton": "اختر صورة...", "uploadStatusReady": "اختر صورة (32 ميجا كحد أقصى)", "uploadStatusUploading": "جاري رفع الصورة...", "uploadStatusError": "فشل رفع الصورة!", "uploadStatusSuccess": "تم الرفع! جاري إنشاء الكود...", "colorsLabel": "الألوان:", "dotsColor": "النقاط", "cornersColor": "الزوايا", "bgColor": "الخلفية", "dotsStyleLabel": "شكل النقاط:", "cornersStyleLabel": "شكل الزوايا:", "styleSquare": "مربع", "styleDots": "نقاط", "styleRounded": "مستدير", "styleClassy": "أنيق", "styleClassyRounded": "أنيق مستدير", "styleExtraRounded": "مستدير جداً", "styleDot": "نقطة", "sizeLabel": "الحجم:", "backToHome": "العودة للرئيسية", "instructionTitle": "دليل استخدام صانع QR Code", "whatIsQR": "هذه أداة احترافية تتيح لك إنشاء أكواد QR مخصصة. يمكنك تحويل نص أو رابط، أو حتى رفع صورة ليتم إنشاء رابط لها ووضعه في الكود. يمكنك تغيير الألوان وشكل نقاط الكود لجعله فريداً.", "howToUse": "كيفية الاستخدام", "step1": "1. اختر نوع الإدخال: \"نص/رابط\" أو \"رفع صورة\".", "step2": "2. إذا اخترت \"نص\"، اكتبه. إذا اخترت \"صورة\"، ارفعها وانتظر إنشاء الرابط.", "step3": "3. (اختياري) اختر الألوان، وشكل النقاط، وشكل الزوايا من القوائم.", "step4": "4. سيظهر الكود مباشرة. اضغط \"تحميل\" لحفظه كصورة PNG.", "privacyNote": "+ حماية خصوصيتك 100%: كل الأكواد (للنصوص) يتم إنشاؤها على جهازك. إذا قمت برفع صورة، يتم رفعها إلى ImgBB للحصول على رابط فقط."
            }
        };
        let currentLang = 'ar'; 
        window.setLanguage = function(lang) {
            currentLang = lang;
            document.documentElement.lang = lang;
            document.documentElement.dir = (lang === 'ar') ? 'rtl' : 'ltr';
            document.querySelectorAll('[data-lang-key]').forEach(element => {
                const key = element.getAttribute('data-lang-key');
                if (translations[lang][key]) element.innerText = translations[lang][key];
            });
            document.getElementById('data-input').placeholder = translations[currentLang].dataLabel.includes('رابط') ? 'https://www.example.com' : 'Text or Link...';
            document.getElementById('upload-status').innerText = translations[currentLang].uploadStatusReady;
        }

        const dataInput = document.getElementById('data-input');
        const imageQrInput = document.getElementById('image-qr-input');
        const uploadStatus = document.getElementById('upload-status');
        const dotsColorInput = document.getElementById('dots-color-input');
        const cornersColorInput = document.getElementById('corners-color-input');
        const bgColorInput = document.getElementById('bg-color-input');
        const dotsSwatch = document.getElementById('dots-swatch');
        const cornersSwatch = document.getElementById('corners-swatch');
        const bgSwatch = document.getElementById('bg-swatch');
        const dotsStyleSelect = document.getElementById('dots-style-select');
        const cornersStyleSelect = document.getElementById('corners-style-select');
        const canvas = document.getElementById('canvas');
        const downloadBtn = document.getElementById('download-btn');
        const downloadArea = document.getElementById('download-area');

        let qrCode = null;
        let currentData = ""; 
        const MAX_IMAGE_SIZE = 32 * 1024 * 1024;

        function updateQRCode() {
            const data = currentData;
            
            if (!data) {
                canvas.innerHTML = `<span data-lang-key="previewArea">${translations[currentLang].previewArea}</span>`;
                downloadArea.style.display = 'none';
                qrCode = null;
                return;
            }

            const options = {
                width: 300, height: 300, data: data,
                dotsOptions: { color: dotsColorInput.value, type: dotsStyleSelect.value },
                backgroundOptions: { color: bgColorInput.value },
                cornersSquareOptions: { color: cornersColorInput.value, type: cornersStyleSelect.value },
                imageOptions: { crossOrigin: "anonymous", margin: 0 }
            };

            if (!qrCode) {
                canvas.innerHTML = '';
                downloadArea.style.display = 'block';
                qrCode = new QRCodeStyling(options);
                qrCode.append(canvas);
            } else {
                qrCode.update(options);
            }
        }
        
        // --- مستمعات الأحداث ---
        dataInput.addEventListener('input', (e) => { currentData = e.target.value; updateQRCode(); });
        dotsColorInput.addEventListener('input', (e) => { dotsSwatch.style.backgroundColor = e.target.value; updateQRCode(); });
        cornersColorInput.addEventListener('input', (e) => { cornersSwatch.style.backgroundColor = e.target.value; updateQRCode(); });
        bgColorInput.addEventListener('input', (e) => { bgSwatch.style.backgroundColor = e.target.value; updateQRCode(); });
        dotsStyleSelect.addEventListener('change', updateQRCode);
        cornersStyleSelect.addEventListener('change', updateQRCode);
        
        imageQrInput.addEventListener('change', async (e) => {
            const file = e.target.files[0];
            if (!file) return;

            if (file.size > MAX_IMAGE_SIZE) { alert("حجم الصورة كبير جداً (32 ميجا كحد أقصى)."); return; }
            uploadStatus.innerText = translations[currentLang].uploadStatusUploading;
            
            const formData = new FormData();
            formData.append('key', IMGBB_API_KEY);
            formData.append('image', file);

            try {
                const response = await fetch('https://api.imgbb.com/1/upload', { method: 'POST', body: formData });
                const result = await response.json();

                if (result.success) {
                    uploadStatus.innerText = translations[currentLang].uploadStatusSuccess;
                    currentData = result.data.url; 
                    dataInput.value = currentData; 
                    updateQRCode(); 
                } else {
                    uploadStatus.innerText = translations[currentLang].uploadStatusError;
                }
            } catch (error) {
                uploadStatus.innerText = translations[currentLang].uploadStatusError;
            }
        });

        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.tab-btn').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                btn.classList.add('active');
                document.getElementById(btn.dataset.tab).classList.add('active');
                
                currentData = "";
                dataInput.value = "";
                uploadStatus.innerText = translations[currentLang].uploadStatusReady;
                updateQRCode();
            });
        });

        downloadBtn.addEventListener('click', () => {
            if (!qrCode) return;
            qrCode.update({ width: 1000, height: 1000 });
            qrCode.download({ name: "skydata-qr", extension: "png" });
            qrCode.update({ width: 300, height: 300 }); // إعادة الحجم للعرض
        });

        // --- تشغيل الصفحة ---
        document.addEventListener("DOMContentLoaded", () => {
             setLanguage(currentLang);
             updateQRCode();
        });
        
    </script>
    <script type="module">
    import { updateAuthUI } from './firebase-config.js';
    updateAuthUI();
</script>

</body>
</html>