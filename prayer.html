<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مواقيت الصلاة والقبلة</title>
    
    <title>SkyData - مواقيت الصلاة</title>
    <meta name="description" content="مواقيت الصلاة الدقيقة لأي مدينة في العالم.">
    <meta name="keywords" content="مواقيت الصلاة, Qibla, SkyData, Prayer Times">
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js"></script>

    <link rel="stylesheet" href="style.css">

    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <script>
      window.OneSignalDeferred = window.OneSignalDeferred || [];
      OneSignalDeferred.push(async function(OneSignal) {
        await OneSignal.init({
          appId: "9bc8ff80-a325-4935-ba4d-03e362a3cc5f",
          safari_web_id: "web.onesignal.auto.bfdbea16-3639-4052-8230-1f603036145d",
          notifyButton: { enable: true },
        });
      });
    </script>

    <style>
        /* ==============================================
           1. إصلاحات الهيدر والقائمة (Overrides)
           ============================================== */
        
        body {
            background-color: #0b132b;
            padding-top: 90px !important; /* مساحة للهيدر */
            overflow-x: hidden;
            font-family: 'Cairo', sans-serif;
            display: block; 
        }

        /* إزالة تأثيرات التركيز والضغط */
        *:focus, *:active, button:focus, input:focus {
            outline: none !important; box-shadow: none !important; border-color: transparent !important; 
            -webkit-tap-highlight-color: transparent !important; 
        }

        /* الهيدر المثبت والمضغوط */
        .main-header {
            height: 70px !important; 
            background-color: #0b132b !important;
            border-bottom: 1px solid #1f2d4d;
            padding: 0 !important;
            position: fixed; top: 0; width: 100%; z-index: 2000;
            display: flex !important; align-items: center !important;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .main-header .container {
            width: 100% !important; height: 100% !important; max-width: 100% !important;
            padding: 0 20px !important; display: flex !important; justify-content: space-between !important;
            align-items: center !important; margin: 0 !important;
        }

        .logo-img { height: 35px !important; width: auto; }

        /* القائمة الجانبية */
        .sidebar { z-index: 2001 !important; padding-top: 20px !important; background-color: #111a30; box-shadow: -5px 0 20px rgba(0,0,0,0.5); }
        .sidebar-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); z-index: 1500;
            opacity: 0; visibility: hidden; transition: 0.3s; backdrop-filter: blur(3px);
        }
        .sidebar-overlay.active { opacity: 1; visibility: visible; }
        
        /* ------------------------------------------------------------- */

        .page-content-wrapper {
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }
        
        .container {
            background-color: #111a30; padding: 30px; border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); width: 100%;
            max-width: 500px; border: 1px solid #2a3a5a; text-align: center;
        }
        h1 { color: #ff6b6b; margin-bottom: 25px; font-size: 2em; }
        form { display: flex; gap: 10px; margin-bottom: 30px; justify-content: space-between; flex-wrap: wrap; }
        #city_name {
            flex-grow: 1; padding: 12px; border: 1px solid #2a3a5a;
            border-radius: 8px; background-color: #0b132b; color: #ffffff;
            font-family: 'Cairo', sans-serif; font-size: 1em; width: 100%; order: 1;
        }
        #city_name:focus { border-color: #00aaff !important; }

        button {
            background-color: #00aaff; color: #111a30; padding: 12px 15px; border: none;
            border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.3s;
        }
        button:hover { background-color: #fff; }

        #location_button { background-color: #00aaff; width: 100%; order: 2; }
        #search_button { width: 100%; order: 3; }

        @media (min-width: 450px) {
             #location_button, #search_button { width: 48%; }
        }

        /* صندوق نتائج أوقات الصلاة */
        #prayer_times_result {
            background-color: #0b132b; padding: 20px; border-radius: 12px;
            border: 1px solid #2a3a5a; text-align: right; margin-bottom: 20px;
        }
        #prayer_times_result h2 { color: #00aaff; margin-bottom: 20px; font-size: 1.5em; text-align: center; }
        
        .prayer-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 12px 0; border-bottom: 1px dashed #2a3a5a;
        }
        .prayer-item:last-child { border-bottom: none; }
        .prayer-name {
            color: #fff; font-weight: bold; font-size: 1.1em; display: flex; align-items: center;
        }
        .prayer-time {
            color: #ff6b6b; font-size: 1.5em; font-family: 'Arial', sans-serif; font-weight: bold;
        }
        .loading-message { color: #00aaff; text-align: center; margin-top: 15px; }

        /* تم حذف كود Modal القبلة بالكامل */
        
    </style>
</head>
<body>

    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <header class="main-header">
        <div class="container">
            <a href="index.html" class="logo">
                <img src="https://i.ibb.co/v4vwvcGq/skydatafull.webp" alt="SkyData Logo" class="logo-img">
            </a>
            <label class="hamburger menu-toggle">
              <input type="checkbox" id="menu-checkbox">
              <svg viewBox="0 0 32 32">
                <path class="line line-top-bottom" d="M27 10 13 10C10.8 10 9 8.2 9 6 9 3.5 10.8 2 13 2 15.2 2 17 3.8 17 6L17 26C17 28.2 18.8 30 21 30 23.2 30 25 28.2 25 26 25 23.8 23.2 22 21 22L7 22"></path>
                <path class="line" d="M7 16 27 16"></path>
              </svg>
            </label>
        </div>
    </header>

    <nav class="sidebar">
        <div class="sidebar-section">
            <h4>القسم 1: تعريف واختصار</h4>
            <ul>
                <li><a href="index.html"><i class="fas fa-home"></i> <span>المنزل</span></a></li>
                <li><a href="aboutus.html"><i class="fas fa-users"></i> <span>عنا</span></a></li>
                <li><a href="safety.html"><i class="fas fa-shield-alt"></i> <span>شروط الخدمة</span></a></li>
                <li><a href="support.html"><i class="fas fa-headset"></i> <span>خدمة العملاء</span></a></li>
                <li><a href="login.html" id="auth-link">
                    <i class="fas fa-sign-in-alt"></i> 
                    <span>تسجيل الدخول</span>
                </a></li>
            </ul>
        </div>

        <div class="sidebar-section">
            <h4 class="ai-title"><i class="fas fa-brain"></i> القسم 2: أدوات AI</h4>
            <ul>
                <li><a href="remove-background-pro.html"><i class="fas fa-eraser"></i> <span>إزالة الخلفية</span></a></li>
                <li><a href="imgscan.html"><i class="fas fa-text-height"></i> <span>تحليل الصور إلى نص</span></a></li>
                <li><a href="logo.html"><i class="fas fa-palette"></i> <span>صنع شعار</span></a></li>
                <li><a href="names.html"><i class="fas fa-random"></i> <span>مولِّد أسماء عشوائية</span></a></li>
                <li><a href="password.html"><i class="fas fa-lock"></i> <span>مولّد كلمات مرور</span></a></li>
                <li><a href="password-strength.html"><i class="fas fa-key"></i> <span>إختبار قوة كلمة السر</span></a></li>
            </ul>
        </div>

        <div class="sidebar-section">
            <h4>القسم 3: أدوات مجانية</h4>
            <ul>
                <li><a href="editor.html"><i class="fas fa-edit"></i> <span>تحرير الصور</span></a></li>
                <li><a href="imgdv.html"><i class="fas fa-compress-arrows-alt"></i> <span>ضغط الصور</span></a></li>
                <li><a href="imgtag.html"><i class="fas fa-link"></i> <span>تحويل صور إلى روابط</span></a></li>
                <li><a href="pdf.html"><i class="fas fa-file-pdf"></i> <span>تحويل صور إلى PDF</span></a></li>
                <li><a href="qr.html"><i class="fas fa-qrcode"></i> <span>صانع كود QR</span></a></li>
                <li><a href="size.html"><i class="fas fa-expand-arrows-alt"></i> <span>تغيير أبعاد الصورة</span></a></li>
                <li><a href="zoom.html"><i class="fas fa-search-plus"></i> <span>تكبير دقة الصورة</span></a></li>
                <li><a href="note.html"><i class="fas fa-sticky-note"></i> <span>مذكرة فورية</span></a></li>
                <li><a href="age.html"><i class="fas fa-calendar-alt"></i> <span>حساب الفرق بين تاريخين</span></a></li>
                
                <li><a href="prayer.html" style="background: rgba(0, 170, 255, 0.1); color: #fff;"><i class="fas fa-mosque"></i> <span>أوقات الصلاة</span></a></li>
                <li><a href="data.city.html"><i class="fas fa-cloud-sun-rain"></i> <span>الطقس</span></a></li>

                <li><a href="txtpdf.html"><i class="fas fa-file-word"></i> <span>تحويل النص إلى PDF</span></a></li>
                <li><a href="Mp3.html"><i class="fas fa-file-audio"></i> <span>تحويل فيديو إلى MP3</span></a></li>
                <li><a href="coler.html"><i class="fas fa-swatchbook"></i> <span>أداة ألوان (Picker)</span></a></li>
                <li><a href="units.html"><i class="fas fa-exchange-alt"></i> <span>محوّلات وحدات</span></a></li>
                <li><a href="cameqr.html"><i class="fas fa-camera"></i> <span>قارئ QR من الكاميرا</span></a></li>
                <li><a href="recorder.html"><i class="fas fa-microphone"></i> <span>تسجيل صوت</span></a></li>
                <li><a href="v-o-edit.html"><i class="fas fa-cut"></i> <span>قص مقطع صوت/فيديو</span></a></li>
                <li><a href="money.html"><i class="fas fa-money-bill-wave"></i> <span>تحويل العملات</span></a></li>
                <li><a href="calculator.html"><i class="fas fa-calculator"></i> <span>الة حاسبة</span></a></li>
                <li><a href="arbtxt.html"><i class="fas fa-font"></i> <span>زخرفة نصوص عربية</span></a></li>
                <li><a href="engtxt.html"><i class="fas fa-spell-check"></i> <span>زخرفة نصوص إنجليزية</span></a></li>
                <li><a href="emoji.html"><i class="fas fa-smile"></i> <span>رموز و إيموجي</span></a></li>
                <li><a href="more.html"><i class="fas fa-sort-amount-up"></i> <span>استخراج الكلمات المكررة</span></a></li>
                <li><a href="fix.html"><i class="fas fa-check-double"></i> <span>تصحيح إملائي</span></a></li>
                <li><a href="pixels.html"><i class="fas fa-draw-polygon"></i> <span>رسم & Pixel</span></a></li>
                <li><a href="hide.html"><i class="fas fa-eye-slash"></i> <span>حروف مخفية</span></a></li>
                <li><a href="kill.html"><i class="fas fa-th-large"></i> <span>تقسيم نص</span></a></li>
                <li><a href="delete.html"><i class="fas fa-trash-alt"></i> <span>حذف الأسطر المكررة</span></a></li>
                <li><a href="gif.html"><i class="fas fa-film"></i> <span>تحويل فيديو إلى GIF</span></a></li>
                <li><a href="morse.html"><i class="fas fa-ellipsis-h"></i> <span>شيفرة مورس</span></a></li>
                <li><a href="hash.html"><i class="fas fa-hashtag"></i> <span>مولد Hash</span></a></li>
                <li><a href="crypto.html"><i class="fas fa-shield-virus"></i> <span>تشفير AES</span></a></li>
                <li><a href="url.html"><i class="fas fa-shield-alt"></i> <span>كشف روابط ضارة</span></a></li>
                <li><a href="voyse.html"><i class="fas fa-volume-up"></i> <span>قياس الضوضاء (dB)</span></a></li>
                <li><a href="base64.html"><i class="fas fa-retweet"></i> <span>تشفير Base64</span></a></li>
                <li><a href="yaml.html"><i class="fas fa-file-code"></i> <span>JSON ↔ YAML</span></a></li>
                <li><a href="codegood.html"><i class="fas fa-code"></i> <span>تنسيق الأكواد</span></a></li>
                <li><a href="dns.html"><i class="fas fa-network-wired"></i> <span>فحص DNS</span></a></li>
                <li><a href="csv.html"><i class="fas fa-file-csv"></i> <span>CSV ↔ JSON</span></a></li>
                <li><a href="zip.html"><i class="fas fa-file-archive"></i> <span>تجميع ملفات ZIP</span></a></li>
                <li><a href="imgcut.html"><i class="fas fa-crop-alt"></i> <span>قص الصور بأشكال</span></a></li>
                <li><a href="safetymake.html"><i class="fas fa-file-signature"></i> <span>مولد سياسة الخصوصية</span></a></li>
                <li><a href="goodarbtxt.html"><i class="fas fa-text-width"></i> <span>ضغط خطوط الويب</span></a></li>
            </ul>
        </div>
        
        <div class="sidebar-footer">
            <div class="social-links">
                <a href="https://discord.gg/6m3c2up4p3" target="_blank"><i class="fab fa-discord"></i></a>
                <a href="https://youtube.com/@skydataa" target="_blank"><i class="fab fa-youtube"></i></a>
                <a href="update.html"><i class="fab fa-android"></i> <span>تحميل التطبيق</span></a>
            </div>
            <div class="footer-nav">
                <a href="safety.html"><i class="fas fa-shield-alt"></i> <span>الخصوصية</span></a>
                <a href="aboutus.html"><i class="fas fa-users"></i> <span>عنا</span></a>
                <a href="help.html"><i class="fas fa-hands-helping"></i> <span>ادعمنا</span></a>
            </div>
            <p class="copyright">
                SkyData © 2025
            </p>
        </div>
    </nav>

    <div class="page-content-wrapper">
        <div class="container">
            <h1><i class="fas fa-mosque" style="margin-left: 10px;"></i> مواقيت الصلاة</h1>
            
            <form id="prayerForm">
                <input type="text" id="city_name" name="city_name" placeholder="أدخل اسم المدينة" required>
                <button type="button" id="location_button"><i class="fas fa-location-arrow"></i> موقعي الحالي</button>
                <button type="submit" id="search_button"><i class="fas fa-search"></i> بحث</button>
            </form>
            
            <div id="error_output" class="error-message"></div>

            <div id="prayer_times_result" style="display: none;">
            </div>
        </div>
    </div>

    <script>
        const menuCheckbox = document.getElementById('menu-checkbox');
        const sidebar = document.querySelector('.sidebar');
        const overlay = document.getElementById('sidebar-overlay');

        function toggleMenu(open) {
            if(open) {
                sidebar.classList.add('open');
                overlay.classList.add('active');
                menuCheckbox.checked = true;
            } else {
                sidebar.classList.remove('open');
                overlay.classList.remove('active');
                menuCheckbox.checked = false;
            }
        }

        menuCheckbox.addEventListener('change', (e) => toggleMenu(e.target.checked));
        overlay.addEventListener('click', () => toggleMenu(false));
    </script>

    <script type="module">
    import { updateAuthUI } from './firebase-config.js';
    updateAuthUI();
</script>

    <script>
        const { DateTime } = luxon; 
        
        const NOMINATIM_URL = "https://nominatim.openstreetmap.org/search";
        const PRAYER_TIMES_URL = "https://api.aladhan.com/v1/timings"; 
        
        const BLOCKED_TERMS = [
            'israel', 'تل ابيب', 'تل أبيب', 'telle a viv', 'jerusalem', 'القدس', 'haifa', 'حيفا', 'netanya', 'ashdod', 'اشدود', 'rishon lezion', 'بات يام'
        ];
        
        const RANDOM_ERROR_MESSAGES = [
            "ما هو هذا شيء", "لا يوجد معلومات حول هذه المنطقة غير موجود", "لا يمكننا تعرف على هذه الدولة هل تقصد فلسطين؟", "لا يمكننا مساعدتك في ذالك", "خطأ", "نعتذر لكن هذه لا يوجد اي معلومات"
        ];

        function getCountryName(code) {
            const countryNames = {
                US: "الولايات المتحدة", EG: "مصر", SA: "المملكة العربية السعودية", FR: "فرنسا",
                DE: "ألمانيا", GB: "المملكة المتحدة", CA: "كندا", AU: "أستراليا",
                AE: "الإمارات العربية المتحدة", QA: "قطر", KW: "الكويت", OM: "عُمان",
                BH: "البحرين", IQ: "العراق", SY: "سوريا", JO: "الأردن", LB: "لبنان",
                PS: "فلسطين", YE: "اليمن", LY: "ليبيا", TN: "تونس", DZ: "الجزائر", 
                MA: "المغرب", SD: "السودان", TR: "تركيا", RU: "روسيا", CN: "الصين",
                GR: "اليونان", PK: "باكستان", NG: "نيجيريا", BD: "بنجلاديش",
                MR: "موريتانيا", SO: "الصومال", DJ: "جيبوتي", KM: "جزر القمر", 
            };
            return countryNames[code] || code;
        }

        function displayRandomBlockMessage(errorOutput) {
            const randomIndex = Math.floor(Math.random() * RANDOM_ERROR_MESSAGES.length);
            const randomMessage = RANDOM_ERROR_MESSAGES[randomIndex];

            errorOutput.textContent = `⚠️ ${randomMessage} - يرجى المحاولة بمدينة أخرى.`;
            errorOutput.style.display = 'block';
            document.getElementById('prayer_times_result').style.display = 'none';
            return { error: 'Blocked city' }; 
        }

        async function getGeoData(cityName, errorOutput) {
            const lowerCaseCityName = cityName.toLowerCase();
            if (BLOCKED_TERMS.some(term => lowerCaseCityName.includes(term))) return displayRandomBlockMessage(errorOutput);

            try {
                const geoRes = await fetch(`${NOMINATIM_URL}?q=${encodeURIComponent(cityName)}&format=jsonv2&limit=1&addressdetails=1`);
                const geoData = await geoRes.json();

                if (!geoData || geoData.length === 0) return { error: "❌ لم يتم العثور على المدينة." };

                const data = geoData[0];
                const countryCode = data.address.country_code ? data.address.country_code.toUpperCase() : null;

                if (countryCode === 'IL' || BLOCKED_TERMS.some(t => data.display_name.toLowerCase().includes(t))) {
                    return displayRandomBlockMessage(errorOutput);
                }
                
                const countryFullName = countryCode ? getCountryName(countryCode) : null;
                let cityDisplay = data.address.city || data.address.town || data.address.village || data.address.county || data.display_name.split(',')[0].trim();
                let fullLocationName = `${cityDisplay}، ${countryFullName || countryCode}`;

                return {
                    latitude: data.lat, longitude: data.lon, locationName: fullLocationName, timezone: data.timezone || 'auto'
                };
            } catch (error) {
                return { error: `❌ خطأ في الاتصال بخدمة الإحداثيات. (${error.message})` };
            }
        }

        async function getPrayerTimes(latitude, longitude, timezone) {
            const date = DateTime.local().setZone(timezone).toISODate();
            const prayerFetchUrl = `${PRAYER_TIMES_URL}/${date}?latitude=${latitude}&longitude=${longitude}&method=3`;

            try {
                const response = await fetch(prayerFetchUrl);
                if (!response.ok) {
                    console.error("فشل في جلب أوقات الصلاة:", response.status);
                    return null;
                }
                const data = await response.json();
                
                if (data.data && data.data.timings) {
                    const timings = data.data.timings;
                    return {
                        Fajr: timings.Fajr, Sunrise: timings.Sunrise, Dhuhr: timings.Dhuhr,
                        Asr: timings.Asr, Maghrib: timings.Maghrib, Isha: timings.Isha
                    };
                }
                return null;
            } catch (error) {
                console.error("خطأ في الاتصال بخدمة أوقات الصلاة:", error);
                return null;
            }
        }

        function displayPrayerTimes(times, locationName) {
            const prayerBox = document.getElementById('prayer_times_result');
            
            if (!times) {
                // رسالة خطأ محسّنة
                prayerBox.innerHTML = '<div class="error-message" style="display:block;">⚠️ تعذر جلب أوقات الصلاة لهذه المدينة. قد تكون الخدمة غير متوفرة حالياً أو المدينة غير معترف بها.</div>';
                prayerBox.style.display = 'block'; return;
            }

            const prayerNames = {
                Fajr: "الفجر", Sunrise: "الشروق", Dhuhr: "الظهر", Asr: "العصر", Maghrib: "المغرب", Isha: "العشاء"
            };
            const prayerIcons = {
                Fajr: "fas fa-cloud-moon", Sunrise: "fas fa-sun", Dhuhr: "fas fa-sun",
                Asr: "fas fa-cloud-sun", Maghrib: "fas fa-cloud-moon", Isha: "fas fa-moon"
            };
            
            let html = `<h2>مواقيت الصلاة في ${locationName}</h2>`;
            
            for (const key in times) {
                if (times.hasOwnProperty(key)) {
                    html += `
                        <div class="prayer-item">
                            <span class="prayer-name">
                                <i class="${prayerIcons[key]}" style="margin-left: 8px; color: #00aaff;"></i>
                                ${prayerNames[key]}
                            </span>
                            <span class="prayer-time">${times[key]}</span>
                        </div>
                    `;
                }
            }
            
            prayerBox.innerHTML = html;
            prayerBox.style.display = 'block';
        }

        async function getPrayerAndQibla(latitude, longitude, locationName, timezone) {
            const prayerTimes = await getPrayerTimes(latitude, longitude, timezone);
            displayPrayerTimes(prayerTimes, locationName);
        }

        document.getElementById('prayerForm').addEventListener('submit', async function(event) {
            event.preventDefault();
            const cityName = document.getElementById('city_name').value;
            const errorOutput = document.getElementById('error_output');

            document.getElementById('prayer_times_result').innerHTML = '<p class="loading-message">جاري جلب الإحداثيات ومواقيت الصلاة...</p>';
            document.getElementById('prayer_times_result').style.display = 'block';
            errorOutput.style.display = 'none';

            const geoData = await getGeoData(cityName, errorOutput);

            if (geoData.error) {
                document.getElementById('prayer_times_result').style.display = 'none';
                return;
            }
            await getPrayerAndQibla(geoData.latitude, geoData.longitude, geoData.locationName, geoData.timezone);
        });

        document.getElementById('location_button').addEventListener('click', function() {
            const errorOutput = document.getElementById('error_output');
            const prayerBox = document.getElementById('prayer_times_result');
            
            errorOutput.style.display = 'none';
            prayerBox.style.display = 'none';

            prayerBox.innerHTML = '<p class="loading-message">⏳ يرجى السماح للمتصفح بالوصول إلى موقعك...</p>';
            prayerBox.style.display = 'block';

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    async (position) => {
                        const lat = position.coords.latitude;
                        const lon = position.coords.longitude;
                        
                        let locationName = "موقعك الحالي";
                        let timezone = 'auto'; 

                        const reverseGeoUrl = `${NOMINATIM_URL}?lat=${lat}&lon=${lon}&format=jsonv2`;
                        
                        try {
                            const response = await fetch(reverseGeoUrl);
                            const data = await response.json();
                            
                            if (data && data.address) {
                                let city = data.address.city || data.address.town || data.address.village || data.address.county || data.address.state || 'منطقة غير محددة';
                                let country = getCountryName(data.address.country_code.toUpperCase());
                                locationName = `${city}، ${country}`;
                            }
                        } catch (e) {
                            locationName = "موقعك الحالي (غير معروف الاسم)";
                        }

                        await getPrayerAndQibla(lat, lon, locationName, timezone);

                    },
                    (error) => {
                        prayerBox.style.display = 'none';
                        errorOutput.textContent = `❌ تعذر الحصول على الموقع: ${error.message}`;
                        errorOutput.style.display = 'block';
                    },
                    {
                        enableHighAccuracy: true, 
                        timeout: 10000,
                        maximumAge: 0
                    }
                );
            } else {
                prayerBox.style.display = 'none';
                errorOutput.textContent = "❌ متصفحك لا يدعم خاصية تحديد الموقع الجغرافي (Geolocation).";
                errorOutput.style.display = 'block';
            }
        });
    </script>
</body>
</html>